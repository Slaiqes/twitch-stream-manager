<!DOCTYPE html>
<html lang="en" data-theme="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Channel Manager - Stream Manager</title>
    <link rel="icon" href="/images/twitch-logo.png" type="image/png">
    <link rel="stylesheet" href="/css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body class="dashboard-page">
    <div class="dashboard-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="channel-profile">
                <img id="channelAvatar" src="" alt="Channel Avatar" class="profile-avatar">
                <h2 id="channelName">Loading...</h2>
                <div class="channel-status">
                    <span id="channelStatus" class="badge badge-lg">
                        <i class="fas fa-circle status-icon"></i> Connecting...
                    </span>
                    <span id="tokenStatus" class="badge badge-secondary">
                        <i class="fas fa-key"></i> Token: Loading...
                    </span>
                </div>
            </div>

            <nav class="sidebar-nav">
                <div class="nav-section">
                    <h3 class="nav-title">MODERATION</h3>
                    <a href="#moderation" class="nav-item active" data-section="moderation">
                        <i class="fas fa-gavel"></i>
                        <span>Mod Tools</span>
                    </a>
                    <a href="#mod-stats" class="nav-item" data-section="mod-stats">
                        <i class="fas fa-chart-bar"></i>
                        <span>Mod Stats</span>
                    </a>
                </div>

                <div class="nav-section">
                    <h3 class="nav-title">STREAM</h3>
                    <a href="#stream-info" class="nav-item" data-section="stream-info">
                        <i class="fas fa-info-circle"></i>
                        <span>Stream Info</span>
                    </a>
                    <a href="#commercials" class="nav-item" data-section="commercials">
                        <i class="fas fa-ad"></i>
                        <span>Commercials</span>
                    </a>
                </div>

                <div class="nav-section">
                    <h3 class="nav-title">ACTIONS</h3>
                    <a href="/hub" class="nav-item" id="backToHubBtn">
                        <i class="fas fa-arrow-left"></i>
                        <span>Back to Hub</span>
                    </a>
                    <a href="#" class="nav-item" id="channelLogout">
                        <i class="fas fa-sign-out-alt"></i>
                        <span>Logout</span>
                    </a>
                </div>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="main-header">
                <div class="header-left">
                    <h1 id="pageTitle">Moderation Tools</h1>
                    <nav class="breadcrumb">
                        <a href="/hub">Dashboard</a>
                        <span>/</span>
                        <span id="breadcrumbChannel">Channel</span>
                        <span>/</span>
                        <span>Moderation</span>
                    </nav>
                </div>

                <div class="header-right">
                    <div class="header-notification">
                        <i class="fas fa-bell"></i>
                        <span class="badge">3</span>
                    </div>
                    <div class="header-user">
                        <img id="headerAvatar" src="" alt="User">
                    </div>
                </div>
            </header>

            <div class="content-section">
                <!-- Moderation Section -->
                <section id="moderation" class="section-content active">
                    <div class="section-header">
                        <h2>Moderation Tools</h2>
                        <p>Manage your channel's moderation actions</p>
                    </div>

                    <div class="card-grid">
                        <!-- Ban User Card -->
                        <div class="card">
                            <div class="card-header">
                                <h3><i class="fas fa-ban"></i> Ban User</h3>
                            </div>
                            <div class="card-body">
                                <div class="form-group">
                                    <label>Username</label>
                                    <input type="text" id="banUsername" placeholder="Enter username">
                                </div>
                                <div class="form-group">
                                    <label>Reason (optional)</label>
                                    <input type="text" id="banReason" placeholder="Enter reason">
                                </div>
                                <button id="banUser" class="btn btn-danger btn-block">
                                    <i class="fas fa-ban"></i> Ban User
                                </button>
                                <div id="banResult" class="result-message"></div>
                            </div>
                        </div>

                        <!-- Timeout User Card -->
                        <div class="card">
                            <div class="card-header">
                                <h3><i class="fas fa-clock"></i> Timeout User</h3>
                            </div>
                            <div class="card-body">
                                <div class="form-group">
                                    <label>Username</label>
                                    <input type="text" id="timeoutUsername" placeholder="Enter username">
                                </div>
                                <div class="form-group">
                                    <label>Duration</label>
                                    <select id="timeoutDuration" class="form-control">
                                        <option value="300">5 minutes</option>
                                        <option value="600">10 minutes</option>
                                        <option value="1800">30 minutes</option>
                                        <option value="3600">1 hour</option>
                                        <option value="86400">1 day</option>
                                        <option value="1209600">2 weeks</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Reason (optional)</label>
                                    <input type="text" id="timeoutReason" placeholder="Enter reason">
                                </div>
                                <button id="timeoutUser" class="btn btn-warning btn-block">
                                    <i class="fas fa-clock"></i> Timeout User
                                </button>
                                <div id="timeoutResult" class="result-message"></div>
                            </div>
                        </div>

                        <!-- Mod Management Card -->
                        <div class="card">
                            <div class="card-header">
                                <h3><i class="fas fa-user-shield"></i> Moderator Management</h3>
                            </div>
                            <div class="card-body">
                                <div class="form-group">
                                    <label>Username</label>
                                    <input type="text" id="modUsername" placeholder="Enter username">
                                </div>
                                <div class="button-group">
                                    <button id="modUser" class="btn btn-primary">
                                        <i class="fas fa-plus-circle"></i> Make Mod
                                    </button>
                                    <button id="unmodUser" class="btn btn-danger">
                                        <i class="fas fa-minus-circle"></i> Remove Mod
                                    </button>
                                </div>
                                <div id="modResult" class="result-message"></div>
                            </div>
                        </div>

                        <!-- VIP Management Card -->
                        <div class="card">
                            <div class="card-header">
                                <h3><i class="fas fa-crown"></i> VIP Management</h3>
                            </div>
                            <div class="card-body">
                                <div class="form-group">
                                    <label>Username</label>
                                    <input type="text" id="vipUsername" placeholder="Enter username">
                                </div>
                                <div class="button-group">
                                    <button id="addVip" class="btn btn-primary">
                                        <i class="fas fa-plus-circle"></i> Add VIP
                                    </button>
                                    <button id="removeVip" class="btn btn-danger">
                                        <i class="fas fa-minus-circle"></i> Remove VIP
                                    </button>
                                </div>
                                <div id="vipResult" class="result-message"></div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Stream Info Section -->
                <section id="stream-info" class="section-content">
                    <div class="section-header">
                        <h2><i class="fas fa-info-circle"></i> Stream Information</h2>
                        <p>Manage your stream title, category, and status</p>
                    </div>

                    <div class="card-grid">
                        <!-- Current Stream Info -->
                        <div class="card">
                            <div class="card-header">
                                <h3><i class="fas fa-broadcast-tower"></i> Current Stream</h3>
                            </div>
                            <div class="card-body">
                                <div class="info-grid">
                                    <div class="info-item">
                                        <label>Status</label>
                                        <div id="streamStatus" class="info-value status-offline">
                                            <i class="fas fa-circle"></i> Offline
                                        </div>
                                    </div>
                                    <div class="info-item">
                                        <label>Title</label>
                                        <div id="streamTitle" class="info-value">Loading...</div>
                                    </div>
                                    <div class="info-item">
                                        <label>Category</label>
                                        <div id="streamCategory" class="info-value">Loading...</div>
                                    </div>
                                    <div class="info-item">
                                        <label>Started At</label>
                                        <div id="streamStarted" class="info-value">-</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Update Stream Info -->
                        <div class="card">
                            <div class="card-header">
                                <h3><i class="fas fa-edit"></i> Update Stream</h3>
                            </div>
                            <div class="card-body">
                                <div class="form-group">
                                    <label for="streamTitleInput">Title</label>
                                    <input type="text" id="streamTitleInput" class="form-control"
                                        placeholder="Enter new stream title">
                                </div>
                                <div class="form-group">
                                    <label for="streamCategoryInput">Category</label>
                                    <div class="search-combo">
                                        <input type="text" id="streamCategoryInput" class="form-control"
                                            placeholder="Search categories...">
                                        <div id="categoryResults" class="search-results"></div>
                                    </div>
                                </div>
                                <button id="updateStreamInfo" class="btn btn-primary btn-block">
                                    <i class="fas fa-save"></i> Update Stream Info
                                </button>
                                <div id="streamUpdateResult" class="result-message"></div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Commercials Section -->
                <section id="commercials" class="section-content">
                    <div class="section-header">
                        <h2><i class="fas fa-ad"></i> Commercial Breaks</h2>
                        <p>Run commercials during your stream</p>
                    </div>

                    <div class="card-grid">
                        <div class="card">
                            <div class="card-header">
                                <h3><i class="fas fa-tv"></i> Run Commercial</h3>
                            </div>
                            <div class="card-body">
                                <div class="form-group">
                                    <label for="commercialLength">Duration</label>
                                    <select id="commercialLength" class="form-control">
                                        <option value="30">30 seconds</option>
                                        <option value="60">60 seconds</option>
                                        <option value="90">90 seconds</option>
                                        <option value="120">120 seconds</option>
                                        <option value="150">150 seconds</option>
                                        <option value="180">180 seconds</option>
                                    </select>
                                </div>
                                <button id="runCommercial" class="btn btn-primary btn-block">
                                    <i class="fas fa-play"></i> Run Commercial
                                </button>
                                <div id="commercialResult" class="result-message"></div>
                            </div>
                        </div>

                        <div class="card">
                            <div class="card-header">
                                <h3><i class="fas fa-history"></i> Commercial History</h3>
                            </div>
                            <div class="card-body">
                                <div class="commercial-history">
                                    <div class="history-item">
                                        <div class="history-time">2 minutes ago</div>
                                        <div class="history-duration">60 seconds</div>
                                    </div>
                                    <div class="history-item">
                                        <div class="history-time">15 minutes ago</div>
                                        <div class="history-duration">30 seconds</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Mod Stats Section -->
                <section id="mod-stats" class="section-content">
                    <div class="section-header">
                        <div class="header-left">
                            <h2><i class="fas fa-chart-bar"></i> Moderation Statistics</h2>
                            <p>Track your moderation team's activity</p>
                        </div>
                        <div class="header-right">
                            <select id="statsTimeframe" class="form-control">
                                <option value="7">Last 7 Days</option>
                                <option value="30" selected>Last 30 Days</option>
                                <option value="60">Last 60 Days</option>
                                <option value="90">Last 90 Days</option>
                                <option value="0">All Time</option>
                            </select>
                        </div>
                    </div>

                    <div class="stats-container">
                        <div class="stats-card">
                            <div class="stats-table-container">
                                <table class="stats-table">
                                    <thead>
                                        <tr>
                                            <th>Moderator</th>
                                            <th>Total Actions</th>
                                            <th>Timeouts</th>
                                            <th>Bans</th>
                                            <th>Actions/Day</th>
                                        </tr>
                                    </thead>
                                    <tbody id="modStatsBody">
                                        <!-- Data will load here -->
                                    </tbody>
                                </table>
                            </div>
                            <div class="stats-chart-container">
                                <canvas id="modStatsChart"></canvas>
                            </div>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <script src="/js/channel.js"></script>
</body>

</html>